<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv='cache-control' content='no-cache'> 
        <meta http-equiv='expires' content='0'> 
        <meta http-equiv='pragma' content='no-cache'>
        <meta charset="utf-8">
        <title>Napervillepol Election Centre</title>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
        integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
        integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
        crossorigin="">
         </script>
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        
        <style>
            body{
                margin: 0;
                padding: 0;
            }

            h1{
                text-align: center;
                
            }
           
            #map{
                
                display: block;
                margin-top: 1rem;
                margin-left: auto;
                margin-right: auto;
                
                width: 800px;
                height: 700px;
                border-style: ridge;
            }
           

            #block {
                
                float: left;   
                
                height: 30px;
                width:  50px;         
                
            }
    
            .container{
                padding: 2rem;
                height: 2000px;
                width:  1000px;
            }
            
            .tabcover{
                padding: .5rem;
                border-style: solid;
                border-color: black;
                border-width: 2px; 
                border-radius: 10px;
            }
            .legendcover{
                padding: .5rem;
                margin-left: 2rem;
            }
        
        </style>
    </head>
    
    <body>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
      
       
        <h1>Georgia Senate Runoff</h1>
        <div class="container">
            <div class="tabcover">
                <nav>
                    <div class="nav nav-pills nav-justified" id="pills-tab" role="tablist">
                      <button class="nav-link active" id="nav-mail-tab" data-bs-toggle="tab" data-bs-target="#nav-mail" type="button" role="tab" aria-controls="nav-mail" aria-selected="true">Mail</button>
                      <button class="nav-link " id="nav-advance-tab" data-bs-toggle="tab" data-bs-target="#nav-advance" type="button" role="tab" aria-controls="nav-advance" aria-selected="false">Advance</button>
                      <button class="nav-link" id="nav-eday-tab" data-bs-toggle="tab" data-bs-target="#nav-eday" type="button" role="tab" aria-controls="nav-eday" aria-selected="false">Election Day</button>
                      <button class="nav-link" id="nav-total-tab" data-bs-toggle="tab" data-bs-target="#nav-total" type="button" role="tab" aria-controls="nav-total" aria-selected="false">Total</button>
                    </div>
                </nav> 
            </div>
            
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane" id="nav-mail" role="tabpanel" aria-labelledby="nav-mail-tab">
                   <script>
                     function style(feature) {
                   return {
                       color: getColor(feature.properties.Margin_Advance),			
                       fillOpacity: 0.7,
                       fillColor: getColor(feature.properties.Margin_Advance),
                       weight: 1,
                       color: '#FFFFFF',
                   };
               }      
                   </script>
                </div>

                <div class="tab-pane" id="nav-advance" role="tabpanel" aria-labelledby="nav-advance-tab">
                    
                </div>
                <div class="tab-pane" id="nav-eday" role="tabpanel" aria-labelledby="nav-eday-tab">
                
                </div>

                <div class="tab-pane" id="nav-total" role="tabpanel" aria-labelledby="nav-total-tab">
                
                </div>
            </div>
            <div id='map'></div>
            <script>
                var geojson; 
                var geojson2;
              
               let url = 'https://raw.githubusercontent.com/Napervillpol/Georgia-2022/bootstrap/Georgia.geojson';
                           
               const response = fetch(url).then(response => response.json()).then(response => {
                                  
                           
                       geojson= L.geoJson(response,
                       {
                           style: style,
                           onEachFeature: onEachFeature                                
                       })                          
                       map.addLayer(geojson)               
                   })                
                    
                var map = L.map('map').setView([32.8407, -83.6324], 7);
               
               L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: 'Â© OpenStreetMap'
               }).addTo(map);
               

                function getColor(d) {                
                   return d > .5 ? '#035382' :
                   d > .4  ? '#16628e' :
                   d > .3  ? '#29719b' :
                   d > .2 ? '#3c81a7' :
                   d > .15 ? '#4f90b3' :
                   d > .1   ? '#629fc0' :
                   d > .05  ? '#75aecc' : 
                   d > 0 ? '#89bed8':
                   d == 0 ? '#ccc9c0':
                   d < -.5 ? '#af001d':
                   d <-.4  ? '#b8162a' : 
                   d < -.3   ? '#c22c38' :
                   d < -.2 ? '#cb4245' :
                   d < -.15 ? '#d45853' :
                   d < -.1  ? '#dd6e60' :
                   d < -.05  ? '#e7846e' :
                   d < 0 ? '#f09a7b' :
                   '#ccc9c0';
               }
   
   
               function highlightFeature(e) {
                   var layer = e.target;
   
                   layer.setStyle({
                       weight: 2,
                       color: '#000000', 
                       fillOpacity: 0.7
                   });
           
                   //info.update(layer.feature.properties);
   
                   if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                       layer.bringToFront();
                   }
               }
   
               function resetHighlight(e) {
                   geojson.resetStyle(e.target);
                   //info.update();
               }
           
               function zoomToFeature(e) {
                    map.fitBounds(e.target.getBounds());
               }
   
               function onEachFeature(feature, layer) {
                   layer.on({
                       mouseover: highlightFeature,
                       mouseout: resetHighlight,
                       click: zoomToFeature
                   });
               }
              
               /*info.update = function (props) {  
                   document.getElementById("info").innerHTML =  (props ?
                   '<b>' + props.PCTNAME + '</b><br />'+ 'Raphael Warnock:&nbsp;'+ props.GOP_VOTES + '&nbsp&nbsp('+Math.round(props.GOP_VOTES/(props.TOTAL_VOTES)*100)+'%)'+'</b><br />' + 'Herschel Walker: &nbsp;' + props.DEM_VOTES +'&nbsp&nbsp('+Math.round(props.DEM_VOTES/(props.GOP_VOTES+props.DEM_VOTES)*100)+'%)'
                   : '<b>' + 'Name' + '</b><br />'+ 'Raphael Warnock:&nbsp;'+ ' Total Votes' + '</b><br />' + 'Herschel Walker: ' + 'Total Votes');
               }; */
           </script>
            <div class="legendcover">
                <div id ="block" style="background-color: #035382;Left: 75px;Top:900px "><p id="label">>50%</p></div>
                <div id ="block" style="background-color: #16628e;Left: 125px;Top:900px "><p id="label">>40%</p></div>
                <div id ="block" style="background-color: #29719b;Left: 175px;Top:900px "><p id="label">>30%</p></div>
                <div id ="block" style="background-color: #3c81a7;Left: 225px;Top:900px "><p id="label">>20%</p></div>
                <div id ="block" style="background-color: #4f90b3;Left: 275px;Top:900px "><p id="label">>10%</p></div>
                <div id ="block" style="background-color: #629fc0;Left: 325px;Top:900px "><p id="label">>10%</p></div>
                <div id ="block" style="background-color: #75aecc;Left: 375px;Top:900px "><p id="label">>5%</p></div>
                <div id ="block" style="background-color: #89bed8;Left: 425px;Top:900px "><p id="label">>0%</p></div>
                <div id ="block" style="background-color: #ccc9c0;Left: 475px;Top:900px "><p id="label">=0%</p></div>
                <div id ="block" style="background-color: #f09a7b;Left: 525px;Top:900px "><p id="label">>0%</p></div>
                <div id ="block" style="background-color: #e7846e;Left: 575px;Top:900px "><p id="label">>5%</p></div>
                <div id ="block" style="background-color: #dd6e60;Left: 625px;Top:900px "><p id="label">>10%</p></div>
                <div id ="block" style="background-color: #d45853;Left: 675px;Top:900px "><p id="label">>15%</p></div>
                <div id ="block" style="background-color: #cb4245;Left: 725px;Top:900px "><p id="label">>20%</p></div>
                <div id ="block" style="background-color: #c22c38;Left: 775px;Top:900px "><p id="label">>30%</p></div>
                <div id ="block" style="background-color: #b8162a;Left: 825px;Top:900px "><p id="label">>40%</p></div>
                <div id ="block" style="background-color: #af001d;Left: 875px;Top:900px "><p id="label">>50%</p></div>
            </div>
           
        </div>
        
        
    </body>
</html>